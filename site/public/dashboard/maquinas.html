<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Máquinas | MoniToons</title>
  <link rel="stylesheet" href="../css/style_maquinas.css">
  <script src="../js/funcionario/exibirNome" defer></script>
</head>

<body onload="mudaBarraApp()">
  <nav class="barra-lateral">
    <div class="titulo-barra-lateral">
      <span class="titulo">MoniToons</span>
      <div class="burger">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
      </div>
    </div>
    <div class="usuario-barra-lateral">
      <div class="imagem-usuario-barra-lateral">
        <img src="../img/usuario.png" alt="Usuário">
      </div>
      <div class="info-usuario-barra-lateral">
        <span class="nome-barra-lateral" id="nome_usuario">Usuário</span>
        <span class="cargo-barra-lateral" id="cargo_usuario">Administrador</span>
      </div>
    </div>
    <ul class="bar-links">
      <li><a href="./maquinas.html">Geral</a></li>
      <!-- <li><a href=".">Computadores</a></li> -->
      <li><a href="./funcionarios.html">Funcionários</a></li>
      <li><a href="./aplicativos.html" id="link_app"></a></li>
    </ul>
    <div class="sair-barra-lateral">
      <a href="../index.html">SAIR</a>
    </div>
  </nav>

  <nav>
    <div class="barra-superior">
      <div class="usuario item-barra">
        <div class="imagem-usuario">
          <img src="../img/usuario.png" alt="Usuário">
        </div>
        <div class="nome-usuario item-barra">
          <span class="nome">Usuário</span>
          <span class="cargo">Administrador</span>
        </div>
      </div>
      <div class="pesquisa item-barra">
        <input type="text" placeholder="Pesquisar">
      </div>
      <div class="sair item-barra">
        <a href="../index.html">SAIR</a>
      </div>
    </div>
  </nav>

  <div class="espaco-barra-lateral"></div>
  <section class="sessao-computadores">
    <div class="container">
      <div class="titulo-sessao">
        <span class="titulo">Computadores</span>
      </div>
      <div class="espaco-titulo-sessao"></div>
      <div class="botao-adicionar"> + </div>

      <div class="metricas">
        <div class="card-metrica">
          <div>Computadores em Alerta</div>
          <div>8</div>
        </div>
        <div class="card-metrica"></div>
        <div class="card-metrica"></div>
      </div>
      <div class="cards" id="cards">

      </div>
    </div>
  </section>
</body>
<script src="../js/enviarEmail.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  function mudaBarraApp(){
    var linkApp = document.getElementById("link_app")
    if(sessionStorage.CARGO_USUARIO == "COMUM"){
      linkApp.innerHTML = "Aplicativos abertos"
    } else if(sessionStorage.CARGO_USUARIO == "ADMINISTRADOR") {
      linkApp.innerHTML = "Aplicativos proibidos"
    }
  }
  // Load the Visualization API and the corechart package.
  google.charts.load('current', { 'packages': ['corechart'] })

  // Set a callback to run when the Google Visualization API is loaded.
  google.charts.setOnLoadCallback(desenharGraficoCPU)

  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.
  function desenharGraficoCPU(memoria, disco, cpu) {

    // Create the data table.
    var comp = "CPU"
    var data = new google.visualization.DataTable()
    data.addColumn('string', 'Topping')
    data.addColumn('number', 'Slices')
    data.addRows([
      ['Livres', 30],
      ['Em Uso', 70]
    ])

    // Set chart options
    var options = {
      'title': comp,
      'height': 160,
      'width': 160,
      'backgroundColor': 'transparent',
      'legend': 'none',
      pieHole: 0.35
    }

    // Instantiate and draw our chart, passing in some options.
    for (let i = 0; i < 10; i += 2) {

      var div_cards = document.getElementById("cards")

      div_cards.innerHTML += `
        <div class="card">
          <div class="content">
            <h2>Computador ${i}</h2>
            <div class="graficos-maquina">
              <div class="grafico-maquina" id="chart_div${i}"></div>
              <div class="grafico-maquina" id="chart_div${i + 1}"></div>
            </div>
            <a href="./dashboard.html">Ver mais</a>
          </div>
        </div>
      `

      var chart = new google.visualization.PieChart(document.getElementById(`chart_div${i}`))
      chart.draw(data, options)

      var chart = new google.visualization.PieChart(document.getElementById(`chart_div${i + 1}`))
      chart.draw(data, options)
    }

  }

</script>

</html>
